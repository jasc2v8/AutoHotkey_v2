
Server
sf:= SharedFile("MySharedFile.txt")
sf.Create() ; Created with sf.UnLock()
Loop

	sf.WaitLock()			; wait for client to send request  sf.WaitRequest()
	
	request:= sf.Receive()
		sf.WaitUnlock()	
		sf.Lock()
		request:=sf.Read()
		sf.UnLock()

	reply:= "ACK: " request

	sf.Send(reply)
		sf.WaitUnlock() 
		sf.Lock()
		sf.Write(reply)
		sf.UnLock()

	if request = "TERMINATE"
		sf.Close()
		exitApp()
	
	sf.WaitUnlock()			; wait for client to finish receive	sf.WaitSend?
	
	; IsLocked() = false
Loop

Client
sf:= SharedFile("MySharedFile.txt")
sf.WaitCreate()
; Server has created SharedFile with sf.UnLock()
Loop
request:=InputBox()
sf.Send(request)
	sf.WaitUnlock()	;
	sf.Lock()				
	sf.Write(request)
	sf.Unlock()  ; allow server to receive
	sf.WaitLock() 	; wait for server to start receive
	
reply:= sf.Receive()
	sf.WaitUnlock()
	sf.Lock()
	reply:=sf.Read()
	sf.Unlock() 
MsgBox reply